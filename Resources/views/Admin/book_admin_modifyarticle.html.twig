{{ pageAddAsset('javascript', zasset('jquery-ui/jquery-ui.js')) }}

{{ pageAddAsset('stylesheet', asset('jquery-ui/themes/base/jquery-ui.min.css')) }}
{{ adminHeader() }}
<div class="container-fluid">
    {{ showflashes() }}
    <h3>{{ __('Edit an article') }}</h3>

    {% for book in books %}
        <h3>{{ book.name }}</h3>
        <div id="ArticleList{{ book.bid }}">
            {% for chapter in book.chapters %}
                {% if chapter.number == -1 %}
                    <h4>{{ chapter.name }}</h4>
                {% else %}
                    <h4>{{ chapter.number }} - {{ chapter.name }}</h4>
                {% endif %}
                <div>
                    <table class="table table-striped">
                        <tbody>
                            {% for article in chapter.articles %}
                                <tr>    
                                    <td><a href="{{ path('paustianbookmodule_user_displayarticle') }}/{{ article.aid }}">{{ chapter.number }} - {{ article.number }} {{ article.title }}</a></td>
                                    <td><a href="{{ path('paustianbookmodule_admin_editarticle') }}/{{ article.aid }}" title="{{ __('Edit Article') }}" class="fa fa-pencil"></a>
                                        <a href="{{ path('paustianbookmodule_admin_addglossarytoarticle') }}/{{ article.aid }}" title="{{ __('Add Glossary Terms to Article') }}" class="fa fa-book"></a>
                                        <a href="{{ path('paustianbookmodule_admin_deletearticle') }}/{{ article.aid }}" title="{{ __('Delete Article') }}" class="fa fa-trash-o" onclick="return confirm('Are you sure you want to delete this article?')"></a></td>
                                </tr>
                            {% endfor %}
                    </table>
                </div>
            {% endfor %}
        </div>
    {% endfor %}

    <script type="text/javascript">
        function buildArticleTable() {
            {% for book in books %}
                jQuery('#ArticleList{{ book.bid }}').accordion({
                    collapsible: true,
                    heightStyle: "content"
                });
            {% endfor %}
        };
        document.onreadystatechange = function () {
            if (document.readyState === 'complete') {
                buildArticleTable();
            }
        };
    </script>
</div>

{{ adminFooter() }}
